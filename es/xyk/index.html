<!doctype html>
<html class="docs-version-current" lang="es" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">XYK Pallet | HydraDX Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.hydradx.io/es/xyk"><meta data-react-helmet="true" name="docusaurus_locale" content="es"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="XYK Pallet | HydraDX Docs"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="icon" href="/es/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://docs.hydradx.io/es/xyk"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/xyk" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/de/xyk" hreflang="de"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/ru/xyk" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/es/xyk" hreflang="es"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/fr/xyk" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/cn/xyk" hreflang="cn"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/xyk" hreflang="x-default"><link rel="stylesheet" href="/es/assets/css/styles.797b45cb.css">
<link rel="preload" href="/es/assets/js/runtime~main.c1105f2e.js" as="script">
<link rel="preload" href="/es/assets/js/main.38f38dbf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Saltar al contenido principal</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/es/"><div class="navbar__logo"><img src="/es/img/logo.svg" alt="HydraDX logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/es/img/logo.svg" alt="HydraDX logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">HydraDX Documentación</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/es/">Documentos</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>español</span></span></a><ul class="dropdown__menu"><li><a href="/xyk" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/de/xyk" target="_self" rel="noopener noreferrer" class="dropdown__link">Deutsch</a></li><li><a href="/ru/xyk" target="_self" rel="noopener noreferrer" class="dropdown__link">русский</a></li><li><a href="/es/xyk" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">español</a></li><li><a href="/fr/xyk" target="_self" rel="noopener noreferrer" class="dropdown__link">français</a></li><li><a href="/cn/xyk" target="_self" rel="noopener noreferrer" class="dropdown__link">中文</a></li></ul></div><a href="https://hydradx.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>HydraDX Página Principal<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/es/">Intro</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/es/create_account">Cómo</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/es/staking">Aprender</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/es/node_setup">Mantener</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/es/dev_intro">Build</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_intro">Intro to Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/es/build_dev_chain">Configura una Cadena para desarrolladores.</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_pools">AMM Pools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_primitives">Primitives Crate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_math">HydraDX Math Crate</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" tabindex="0" href="/es/dev_pallets">Pallets</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_pallets">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/es/registry">Asset Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/es/xyk">XYK Pallet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_pallet_hdx">HDX Pallet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_pallet_exchange">Exchange</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_pallet_payment">Transaction Multi-Payment</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/es/dev_exercise">Practical exercise</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/es/contributing">Contribuyendo</a></div></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">En esta página</button></div><div class="theme-doc-markdown markdown"><header><h1>XYK Pallet</h1></header><h3 class="anchor anchorWithStickyNavbar_31ik" id="overview">Overview<a aria-hidden="true" class="hash-link" href="#overview" title="Enlace directo al encabezado">​</a></h3><p>Uniswap AMM model implementation.</p><p>This pallet also implements the AMM trait which makes it possible to plug it into exchange pallet.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="config">Config<a aria-hidden="true" class="hash-link" href="#config" title="Enlace directo al encabezado">​</a></h3><p>Config is pretty straight-forward.</p><div class="codeBlockContainer_K1bP language-rust"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub trait Config: frame_system::Config + pallet_asset_registry::Config {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    type Event: From&lt;Event&lt;Self&gt;&gt; + IsType&lt;&lt;Self as frame_system::Config&gt;::Event&gt;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// Share token support</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    type AssetPairAccountId: AssetPairAccountIdFor&lt;AssetId, Self::AccountId&gt;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// Multi currency for transfer of currencies</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    type Currency: MultiCurrencyExtended&lt;Self::AccountId, CurrencyId = AssetId, Balance = Balance, Amount = Amount&gt;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// Native Asset Id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    type NativeAssetId: Get&lt;AssetId&gt;;    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// Weight information for the extrinsics.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    type WeightInfo: WeightInfo;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// Trading fee rate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    type GetExchangeFee: Get&lt;fee::Fee&gt;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar código al portapapeles" class="copyButton_Ue-o clean-btn">Copiar</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="storage">Storage<a aria-hidden="true" class="hash-link" href="#storage" title="Enlace directo al encabezado">​</a></h3><p>A pool is created for each asset pair. Information about the existing pools is kept in the following storage structures:</p><p><em>ShareToken</em></p><div class="codeBlockContainer_K1bP language-rust"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub type ShareToken&lt;T: Config&gt; = StorageMap&lt;_, Blake2_128Concat, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    T::AccountId, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    AssetId, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ValueQuery&gt;;</span><br></span></code></pre><button type="button" aria-label="Copiar código al portapapeles" class="copyButton_Ue-o clean-btn">Copiar</button></div></div><p>Mapping between a pool account and an asset id obtained from the registry.</p><p><em>PoolAssets</em></p><div class="codeBlockContainer_K1bP language-rust"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub type PoolAssets&lt;T: Config&gt; = StorageMap&lt;_, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Blake2_128Concat, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    T::AccountId, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    (AssetId, AssetId), </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ValueQuery&gt;;</span><br></span></code></pre><button type="button" aria-label="Copiar código al portapapeles" class="copyButton_Ue-o clean-btn">Copiar</button></div></div><p>Mapping between a pool account and a tuple of assets in this pool. This is useful only when listing existing pools and their assets (eg. for FE).</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="extrinsics">Extrinsics<a aria-hidden="true" class="hash-link" href="#extrinsics" title="Enlace directo al encabezado">​</a></h3><p>This pallet has the following extrinsics:</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="create_pool">create_pool<a aria-hidden="true" class="hash-link" href="#create_pool" title="Enlace directo al encabezado">​</a></h4><div class="codeBlockContainer_K1bP language-rust"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[pallet::weight(&lt;T as Config&gt;::WeightInfo::create_pool())]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[transactional]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn create_pool(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    origin: OriginFor&lt;T&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_a: AssetId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_b: AssetId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    amount: Balance,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    initial_price: Price,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; DispatchResultWithPostInfo {}</span><br></span></code></pre><button type="button" aria-label="Copiar código al portapapeles" class="copyButton_Ue-o clean-btn">Copiar</button></div></div><p>As the name suggests, this creates a pool between asset A and asset B (if such pool does not already exist) with initial liquidity determined by the amount and initial price.
It generates a name for this asset pair and asks the registry to return an id for the name (either assigning a new one or reusing a previously assigned name, if such pool existed).</p><p>It also constructs a pool account for this pair and stores the mapping in storage under ShareToken as described above. </p><p>You may ask &quot;How do we know the account if we add liquidity for example&quot;? Constructing the pool account id is deterministic, so adding liquidity into the pool of  asset A and B would generate the same account id. This is demonstrated in the following example:</p><div class="codeBlockContainer_K1bP language-rust"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">fn from_assets(asset_a: AssetId, asset_b: AssetId) -&gt; T::AccountId {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let mut buf = Vec::new();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    buf.extend_from_slice(b&quot;hydradx&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if asset_a &lt; asset_b {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        buf.extend_from_slice(&amp;asset_a.to_le_bytes());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        buf.extend_from_slice(&amp;asset_b.to_le_bytes());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        buf.extend_from_slice(&amp;asset_b.to_le_bytes());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        buf.extend_from_slice(&amp;asset_a.to_le_bytes());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    T::AccountId::unchecked_from(T::Hashing::hash(&amp;buf[..]))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar código al portapapeles" class="copyButton_Ue-o clean-btn">Copiar</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="add_liquidity">add_liquidity<a aria-hidden="true" class="hash-link" href="#add_liquidity" title="Enlace directo al encabezado">​</a></h4><h4 class="anchor anchorWithStickyNavbar_31ik" id="remove_liquidity">remove_liquidity<a aria-hidden="true" class="hash-link" href="#remove_liquidity" title="Enlace directo al encabezado">​</a></h4><p>Add and remove liquidity are pretty straight-forward and easy to understand by checking the implementation.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="buy--sell">buy / sell<a aria-hidden="true" class="hash-link" href="#buy--sell" title="Enlace directo al encabezado">​</a></h4><p>Probably the most interesting part of the pallet. Sell and buy are very similar however they differ in few minor details - what and how is checked
when resolving the transaction (mostly multiple limits).</p><p>Sell:</p><div class="codeBlockContainer_K1bP language-rust"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[pallet::weight(&lt;T as Config&gt;::WeightInfo::sell())]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn sell(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    origin: OriginFor&lt;T&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_in: AssetId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_out: AssetId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    amount: Balance,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    min_limit: Balance,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    discount: bool,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; DispatchResultWithPostInfo {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let who = ensure_signed(origin)?;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;Self as AMM&lt;_, _, _, _&gt;&gt;::sell(&amp;who, AssetPair { asset_in, asset_out }, amount, min_limit, discount)?;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Ok(().into())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar código al portapapeles" class="copyButton_Ue-o clean-btn">Copiar</button></div></div><p>In the case of sell, the user specifies min_limit of an asset_out which should be exchanged for a certain amount of asset_in.</p><p>buy:</p><div class="codeBlockContainer_K1bP language-rust"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[pallet::weight(&lt;T as Config&gt;::WeightInfo::buy())]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn buy(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    origin: OriginFor&lt;T&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_out: AssetId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_in: AssetId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    amount: Balance,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    max_limit: Balance,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    discount: bool,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; DispatchResultWithPostInfo {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let who = ensure_signed(origin)?;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;Self as AMM&lt;_, _, _, _&gt;&gt;::buy(&amp;who, AssetPair { asset_in, asset_out }, amount, max_limit, discount)?;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Ok(().into())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copiar código al portapapeles" class="copyButton_Ue-o clean-btn">Copiar</button></div></div><p>In the case of buy, the user specifies max_limit of an asset_in to be exchanged for a certain amount of asset_out.</p><p>If you look at the implementation of the buy/sell functions, you will see that they make calls under the hood to the AMM trait implementation for this pallet. This helps with avoiding code duplication and making this pallet easily usable in an exchange.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/galacticcouncil/HydraDX-docs/edit/main/docs/dev_pallet_xyk.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edita esta página</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Navegación de páginas de documentos"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/es/registry"><div class="pagination-nav__sublabel">Previo</div><div class="pagination-nav__label">« <!-- -->Asset Registry</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/es/dev_pallet_hdx"><div class="pagination-nav__sublabel">Siguiente</div><div class="pagination-nav__label">HDX Pallet<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#config" class="table-of-contents__link toc-highlight">Config</a></li><li><a href="#storage" class="table-of-contents__link toc-highlight">Storage</a></li><li><a href="#extrinsics" class="table-of-contents__link toc-highlight">Extrinsics</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Comunidad</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/HDNPFFrcnW" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/hydra_dx" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Intergalactic, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/es/assets/js/runtime~main.c1105f2e.js"></script>
<script src="/es/assets/js/main.38f38dbf.js"></script>
</body>
</html>